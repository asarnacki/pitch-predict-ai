---
import Layout from "../layouts/Layout.astro";
import { AuthForm } from "../components/AuthForm";
import { Toaster } from "../components/ui/sonner";

// This page should be server-side rendered
export const prerender = false;

// Password recovery token handling:
// Supabase automatically detects session from URL hash (#access_token=...) via detectSessionInUrl: true
// See src/db/supabase.server.ts - the middleware extracts the session from the reset link
// If no valid session exists, the API endpoint will return 401 and AuthForm will handle the error
---

<Layout title="Ustaw nowe hasÅ‚o - PitchPredict AI">
  <main class="min-h-screen flex items-center justify-center p-4 bg-background">
    <div class="w-full max-w-md">
      <AuthForm client:load mode="update-password" />
    </div>
  </main>
  <Toaster client:load />
</Layout>
